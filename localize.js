var dictionary = {
    "en": {
        // absolute-preview
        "open-in-browser": "Open in browser",

        // header
        "get-in-touch": "Get in touch",

        // page1
        "name": "i’m Dima <br> Gromov",
        "info": "middle <a href=\"#projects\">ux/ui designer</a> & <br> fullstack web/ios developer",
        
        "block-1": "located in <b>Crimea,<br>Simferopol</b>",
        "block-3": "my pet photos",
        
        // page2
        "h1-p2": "what i love",


        "card-1": "designing fun <em> user<br>interactions </em>",

        // no translate
        "card-2": "Figma",
        "card-3": ".html+.css",
        "card-4": "Swift UI",

        "card-5": "creating <em>new</em> and <br><em>fresh</em> ui",


        // page3
        "h1-p3": "places where i <br> gathered experience",
        "now": "now",

        // page4
        "h1-p4": "recent projects",
        "list-btn": "View as list",
        "desktop-btn": "See on ’’desktop’’",
        "web-preview": "Preview Website",
        "case-study": "Case study",

        "antarctis-desc": "<h4>Web design, Frontend</h4><p>A service catalog that gives the user not only browsing and buying options, but also precise customization of products. Then a PDF configuration file is sent to the employee’s email, and a copy goes to the buyer’s personal account.</p><h4>AR objects!</h4><p>I added integration with a service that renders AR objects. It has a convenient admin panel, and now each product can have its own model that can be rotated and previewed in real life on the phone.</p>",
        "bulevard-desc": "<h4>Web design, frontend tweaks</h4><p>Here we created two web apps for the coffee shop.</p><h4>PWA for the barista.</h4><p>It keeps track of coffee orders, and the barista can issue a free coffee — resetting the counter. We added QR codes for users so they can access their account without entering credentials.</p><h4>Cup tracking for the customer</h4><p>A web app that shows a festive background when the user can get a free coffee, along with their account, unique card, and registration date.</p>",
        "plategaio-desc": "<h4>UI/UX Design, Vue.js Frontend</h4><h4>Payment form for online acquiring</h4><p>Created the design. For this project, I discovered Vue.js for the first time, connected the form to the backend, worked on the timer, and the subsequent steps for waiting for the payment to be received.</p>",

        "remind-me": "Remind me",

        //...

        // page5
        "h1-p5": "let’s get in touch",
        "p-p5": "i'm wide open for new projects",
        "telegram": "Telegram",
        "email": "Email me",


        "january": "january",
        "february": "february",
        "march": "march",
        "april": "april",
        "may": "may",
        "june": "june",
        "july": "july",
        "august": "august",
        "september": "sep",
        "october": "october",
        "november": "november",
        "december": "december",

        "more-project-add": "i have <b>3</b> more projects to add",

    },
    "ru": {
        // absolute-preview
        "open-in-browser": "Открыть в браузере",

        // header
        "get-in-touch": "Связаться",

        // page1
        "name": "я Дима <br> Громов",
        "info": "middle <a href=\"#projects\">ux/ui дизайнер</a> и <br> fullstack web/ios разработчик",
        "block-1": "нахожусь в <b>Крыму,<br>Симферополь</b>",
        "block-3": "фото питомцев",
        
        // page2
        "h1-p2": "что я люблю",


        "card-1": "разрабатывать<br> уникальный <em> юзер <br> экспириенс</em>",

        "card-2": "Figma",
        "card-3": ".html+.css",
        "card-4": "Swift UI",

        "card-5": "создавать <em>новый</em> и <br><em>яркий</em> ui",


        // page3
        "h1-p3": "места, где я <br> набирался опыта",
        "now": "сейчас",

        // page4
        "h1-p4": "недавние проекты",
        "list-btn": "Отобразить как список",
        "desktop-btn": "Вернуть ’’рабочий стол’’",
        "web-preview": "Превью сайта",
        "case-study": "Кейс",

        "antarctis-desc": "<h4>Веб дизайн, Фронтенд</h4><p>Сервис-каталог который дает юзеру не только просмотр и покупку товаров, но и предоставляыет точную подгонку их под себя, далее PDF файл конфигурации приходит на почту сотруднику, а также его копия - в личный кабинет покупателя.</p><h4>AR объекты!</h4><p>Я добавил интеграцию с сервисом который рисует AR обьекты, у него удобная админка и теперь на каждый товар можно добавить свою модельку, которую можно покрутить и посмотреть в жизни на телефоне.</p>",
        "bulevard-desc": "<h4>Веб дизайн, правки на Фронтенде</h4><p>Здесь мы создали сразу два веб-приложения для кофейни.</p><h4>PWA для баристы.</h4><p>Здесь ведется учет заказов кофе, бариста может выдавать бесплатный кофе - тем самым сбрасывая счетчик для него. Добавили QR коды для пользователей для доступа в личный кабинет, чтобы он не вводил свои данные.</p><h4>Отслеживание чашек для покупателя</h4><p>Веб приложение, где есть праздничный фон - когда юзер может забрать бесплатный кофе, а также аккаунт с его уникальной карточкой и датой регистрации</p>",
        "plategaio-desc": "<h4>UI/UX Дизайн, Vue.js Фронтенд</h4><h4>Платежная форма для интернет эквайринга</h4><p>Создал дизайн. Ради этого заказа впервые открыл для себя Vue.js, подключил форму к бекенду, проработал таймер, и последующие шаги ожидания поступления платежа.</p>",
        
        "remind-me": "Напомнить мне",

        // page5
        "h1-p5": "мои контакты",
        "p-p5": "я открыт для новых проектов!",
        "telegram": "Телеграм",
        "email": "Почта",


        "january": "января",
        "february": "февраля",
        "march": "марта",
        "april": "апреля",
        "may": "мая",
        "june": "июня",
        "july": "июля",
        "august": "августа",
        "september": "сентября",
        "october": "октября",
        "november": "ноября",
        "december": "декабря",

        "more-project-add": "есть еще где-то <b>3</b> недобавленных проектов!",

    }
}

class HTMLLocalizer {
    constructor() {
        customElements.define('localized-text', LocalizedTextElement);
    }
}

class LocalizedTextElement extends HTMLElement {
    constructor() {
        super();
    }

    connectedCallback() {
        var key = this.hasAttribute('key') ? this.getAttribute('key') : '';
        var lang = this.hasAttribute('lang') ? this.getAttribute('lang') : this.getLang();
        this.innerHTML = this.translate(key, lang);
    }

    getLang() {
        var lang = (navigator.languages != undefined) ? navigator.languages[0] : navigator.language;
        // Ignore country code (example: en-US -> en)
        return lang.split("-")[0];
    }

    translate(key, lang) {
        return (lang in dictionary) ? dictionary[lang][key] : dictionary['_'][key];
    }
}

new HTMLLocalizer();




function switchLanguage() {
    var currentLang = document.documentElement.lang || 'en';
    var newLang = currentLang === 'en' ? 'ru' : 'en';
    document.documentElement.lang = newLang;
    updateTextLanguage(newLang);

    document.getElementById('lang-toggle').innerHTML = newLang === 'en' 
        ? `<p id="btn-context">Читать на русском</p>
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" fill="none">
              <path d="M1 1L6 6L11 1" stroke="#CCBFB0" stroke-width="1.5"/>
            </svg>`
        : `<p id="btn-context">Switch to English</p>
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" fill="none">
              <path d="M1 1L6 6L11 1" stroke="#CCBFB0" stroke-width="1.5"/>
            </svg>`;
}

document.getElementById('lang-toggle').addEventListener('click', function() {
    switchLanguage();
});

window.onload = function() {
    var currentLang = document.documentElement.lang || 'en';
    document.documentElement.lang = currentLang;

    document.getElementById('lang-toggle').innerHTML = currentLang === 'en' 
        ? `<p id="btn-context">Читать на русском</p>
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" fill="none">
              <path d="M1 1L6 6L11 1" stroke="#CCBFB0" stroke-width="1.5"/>
            </svg>`
        : `<p id="btn-context">Switch to English</p>
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" fill="none">
              <path d="M1 1L6 6L11 1" stroke="#CCBFB0" stroke-width="1.5"/>
            </svg>`;
};


function updateTextLanguage(lang) {
    var elements = document.querySelectorAll('localized-text');
    elements.forEach(function (element) {
        var key = element.getAttribute('key');
        element.innerHTML = dictionary[lang][key] || dictionary['_'][key];
    });
}